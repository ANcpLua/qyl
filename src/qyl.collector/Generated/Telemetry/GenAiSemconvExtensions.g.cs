// <auto-generated>
//     This code was generated by qyl.build (OTelSemconvGenerator).
//     Do not edit this file manually - changes will be overwritten.
//
//     Source:    eng/build/Domain/CodeGen/QylSchema.cs
//     Generator: OTelSemconvGenerator
//     Output:    Telemetry/GenAiSemconvExtensions.g.cs
//     Generated: 2025-12-17T23:16:48.2613510Z
// </auto-generated>

#nullable enable

using System;

namespace qyl.protocol.Telemetry;

/// <summary>
/// Extension methods for GenAI attribute key matching.
/// </summary>
public static class GenAiSemconvExtensions
{
    // ─────────────────────────────────────────────────────────────────────
    // STRING EXTENSION METHODS
    // ─────────────────────────────────────────────────────────────────────

    /// <summary>
    /// Checks if the key starts with "gen_ai." prefix.
    /// </summary>
    public static bool IsGenAiAttribute(this string key)
        => key.StartsWith("gen_ai.", StringComparison.Ordinal);

    /// <summary>
    /// Checks if the key is an agent or tool attribute.
    /// </summary>
    public static bool IsAgentOrToolAttribute(this string key)
        => key.StartsWith("gen_ai.agent.", StringComparison.Ordinal) ||
           key.StartsWith("gen_ai.tool.", StringComparison.Ordinal);

    /// <summary>
    /// Checks if the key matches any gen_ai.* sub-namespace.
    /// </summary>
    public static bool IsGenAiSubNamespace(this string key)
    {
        if (!key.StartsWith("gen_ai.", StringComparison.Ordinal)) return false;
        return key.StartsWith("gen_ai.agent.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.tool.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.request.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.response.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.usage.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.evaluation.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.embeddings.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.data_source.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.input.", StringComparison.Ordinal) ||
               key.StartsWith("gen_ai.output.", StringComparison.Ordinal);
    }

    /// <summary>
    /// Checks if the key is a deprecated attribute that needs migration.
    /// </summary>
    public static bool IsDeprecatedAttribute(this string key)
        => GenAiSemconv.Migrations.ContainsKey(key);

    /// <summary>
    /// Checks if the key is a legacy agents.* prefix attribute.
    /// </summary>
    public static bool IsLegacyAgentsAttribute(this string key)
        => key.StartsWith("agents.", StringComparison.Ordinal);

    // ─────────────────────────────────────────────────────────────────────
    // READONLYSPAN<BYTE> EXTENSION METHODS (for Utf8JsonReader)
    // ─────────────────────────────────────────────────────────────────────

    /// <summary>
    /// Checks if the UTF-8 key starts with "gen_ai." prefix.
    /// </summary>
    public static bool IsGenAiAttribute(this ReadOnlySpan<byte> key)
        => key.Length >= 7 && key[..7].SequenceEqual(GenAiSemconvUtf8.PrefixGenAi);

    /// <summary>
    /// Checks if the UTF-8 key is an agent or tool attribute.
    /// </summary>
    public static bool IsAgentOrToolAttribute(this ReadOnlySpan<byte> key)
    {
        if (key.Length < 13) return false;
        return key.StartsWith(GenAiSemconvUtf8.PrefixAgent) ||
               key.StartsWith(GenAiSemconvUtf8.PrefixTool);
    }

    /// <summary>
    /// Checks if the UTF-8 key starts with "agents." legacy prefix.
    /// </summary>
    public static bool IsLegacyAgentsAttribute(this ReadOnlySpan<byte> key)
        => key.Length >= 7 && key.StartsWith(GenAiSemconvUtf8.PrefixLegacyAgents);
}
