{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AgentRun",
  "type": "object",
  "properties": {
    "traceId": { "type": "string" },
    "spanId": { "type": "string" },
    "parentSpanId": { "type": ["string", "null"] },

    "providerName": { "type": "string" },
    "operationName": { "type": "string" },

    "agentId": { "type": ["string", "null"] },
    "agentName": { "type": ["string", "null"] },
    "agentDescription": { "type": ["string", "null"] },
    "conversationId": { "type": ["string", "null"] },

    "systemInstructions": { "type": ["string", "null"] },
    "inputMessages": {},
    "outputMessages": {},
    "outputType": { "type": ["string", "null"] },

    "requestModel": { "type": ["string", "null"] },
    "temperature": { "type": ["number", "null"] },
    "topK": { "type": ["number", "null"] },
    "topP": { "type": ["number", "null"] },
    "presencePenalty": { "type": ["number", "null"] },
    "frequencyPenalty": { "type": ["number", "null"] },
    "maxTokens": { "type": ["integer", "null"] },
    "choiceCount": { "type": ["integer", "null"] },
    "seed": { "type": ["integer", "null"] },

    "inputTokens": { "type": ["integer", "null"] },
    "outputTokens": { "type": ["integer", "null"] },

    "responseId": { "type": ["string", "null"] },
    "responseModel": { "type": ["string", "null"] },
    "finishReasons": {
      "type": ["array", "null"],
      "items": { "type": "string" }
    },

    "toolDefinitions": {},
    "toolCalls": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/ToolCall"
      }
    },

    "errorType": { "type": ["string", "null"] },
    "errorMessage": { "type": ["string", "null"] },

    "startTime": { "type": "string", "format": "date-time" },
    "endTime": { "type": "string", "format": "date-time" },

    "attributes": {
      "type": "object",
      "additionalProperties": true
    }
  },

  "required": [
    "traceId",
    "spanId",
    "providerName",
    "operationName",
    "startTime",
    "endTime",
    "toolCalls",
    "attributes"
  ],

  "$defs": {
    "ToolCall": {
      "type": "object",
      "properties": {
        "spanId": { "type": "string" },
        "toolCallId": { "type": ["string", "null"] },
        "toolName": { "type": ["string", "null"] },
        "toolType": { "type": ["string", "null"] },
        "arguments": {},
        "result": {},
        "errorType": { "type": ["string", "null"] },
        "errorMessage": { "type": ["string", "null"] },
        "startTime": { "type": "string", "format": "date-time" },
        "endTime": { "type": "string", "format": "date-time" }
      },
      "required": ["spanId", "startTime", "endTime"]
    }
  }
}
