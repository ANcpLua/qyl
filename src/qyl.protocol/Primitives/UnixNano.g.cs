// <auto-generated>
//     This code was generated by qyl.build (CSharpGenerator).
//     Do not edit this file manually - changes will be overwritten.
//
//     Source:    eng/build/Domain/CodeGen/QylSchema.cs
//     Generator: CSharpGenerator
//     Output:    Primitives/UnixNano.g.cs
//     Generated: 2025-12-17T23:31:13.7119670Z
// </auto-generated>

#nullable enable

using System;
using System.Diagnostics.CodeAnalysis;
using System.Globalization;
using System.Text.Json;
using System.Text.Json.Serialization;

namespace qyl.protocol.Primitives;

/// <summary>
/// Unix timestamp in nanoseconds (OTel wire format)
/// </summary>
public readonly partial struct UnixNano : ISpanParsable<UnixNano>, IEquatable<UnixNano>, IComparable<UnixNano>, IFormattable
{
    private readonly ulong _value;

    /// <summary>Creates a new <see cref="UnixNano"/> from the underlying value.</summary>
    public UnixNano(ulong value) => _value = value;

    /// <summary>Gets the underlying ulong value.</summary>
    public ulong Value => _value;

    /// <summary>Gets the default (empty) value.</summary>
    public static UnixNano Empty => new(0UL);

    /// <summary>Implicitly converts to the underlying type.</summary>
    public static implicit operator ulong(UnixNano value) => value._value;

    /// <summary>Explicitly converts from the underlying type.</summary>
    public static explicit operator UnixNano(ulong value) => new(value);

    /// <inheritdoc/>
    public bool Equals(UnixNano other) => _value.Equals(other._value);

    /// <inheritdoc/>
    public override bool Equals([NotNullWhen(true)] object? obj) => obj is UnixNano other && Equals(other);

    /// <inheritdoc/>
    public override int GetHashCode() => _value.GetHashCode();

    /// <inheritdoc/>
    public int CompareTo(UnixNano other) => _value.CompareTo(other._value);

    /// <summary>Equality operator.</summary>
    public static bool operator ==(UnixNano left, UnixNano right) => left.Equals(right);

    /// <summary>Inequality operator.</summary>
    public static bool operator !=(UnixNano left, UnixNano right) => !left.Equals(right);

    /// <inheritdoc/>
    public override string ToString() => _value.ToString();

    /// <inheritdoc/>
    public string ToString(string? format, IFormatProvider? formatProvider) => _value.ToString(format, formatProvider);

    /// <summary>Parses a span of characters into a <see cref="UnixNano"/>.</summary>
    public static UnixNano Parse(ReadOnlySpan<char> s, IFormatProvider? provider = null)
        => new(ulong.Parse(s, NumberStyles.None, provider));

    /// <summary>Tries to parse a span of characters into a <see cref="UnixNano"/>.</summary>
    public static bool TryParse(ReadOnlySpan<char> s, IFormatProvider? provider, out UnixNano result)
    {
        if (ulong.TryParse(s, NumberStyles.None, provider, out var value))
        {
            result = new UnixNano(value);
            return true;
        }
        result = Empty;
        return false;
    }

    /// <summary>Parses a string into a <see cref="UnixNano"/>.</summary>
    public static UnixNano Parse(string s, IFormatProvider? provider = null)
        => Parse(s.AsSpan(), provider);

    /// <summary>Tries to parse a string into a <see cref="UnixNano"/>.</summary>
    public static bool TryParse([NotNullWhen(true)] string? s, IFormatProvider? provider, out UnixNano result)
    {
        if (s is null)
        {
            result = Empty;
            return false;
        }
        return TryParse(s.AsSpan(), provider, out result);
    }

    /// <summary>Returns true if this is the default/empty value.</summary>
    public bool IsEmpty => _value == 0UL;

    /// <summary>Gets the zero value.</summary>
    public static readonly UnixNano Zero = Empty;

    /// <summary>Converts to TimeSpan (from Unix epoch).</summary>
    public TimeSpan ToTimeSpan() => TimeSpan.FromTicks((long)(_value / 100));

    /// <summary>Converts to DateTimeOffset.</summary>
    public DateTimeOffset ToDateTimeOffset() => DateTimeOffset.FromUnixTimeMilliseconds((long)(_value / 1_000_000));

}
