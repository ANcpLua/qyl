---
title: "Core Types"
description: "Strongly-typed identifiers and core data models"
---

# Core Types

qyl uses strongly-typed identifiers to prevent primitive obsession and improve type safety.

## Strongly-Typed Identifiers

### SessionId

Unique identifier for a telemetry session.

| Property | Value |
|----------|-------|
| Underlying type | `Guid` |
| Format | `550e8400-e29b-41d4-a716-446655440000` |
| Example | `"a1b2c3d4-e5f6-7890-abcd-ef1234567890"` |

```csharp
public readonly record struct SessionId(Guid Value)
{
    public static SessionId New() => new(Guid.NewGuid());
    public override string ToString() => Value.ToString();
}
```

### TraceId

Correlates spans across a distributed trace. Uses OpenTelemetry's W3C Trace Context format.

| Property | Value |
|----------|-------|
| Underlying type | `ActivityTraceId` |
| Format | 32-character hexadecimal |
| Example | `"4bf92f3577b34da6a3ce929d0e0e4736"` |

```csharp
public readonly record struct TraceId(ActivityTraceId Value)
{
    public override string ToString() => Value.ToString();
}
```

### SpanId

Unique identifier for a single span within a trace.

| Property | Value |
|----------|-------|
| Underlying type | `ActivitySpanId` |
| Format | 16-character hexadecimal |
| Example | `"00f067aa0ba902b7"` |

```csharp
public readonly record struct SpanId(ActivitySpanId Value)
{
    public override string ToString() => Value.ToString();
}
```

### UnixNano

High-precision timestamp for span timing.

| Property | Value |
|----------|-------|
| Underlying type | `ulong` |
| Format | Nanoseconds since Unix epoch |
| Example | `1704067200000000000` (2024-01-01 00:00:00 UTC) |

```csharp
public readonly record struct UnixNano(ulong Value)
{
    public DateTimeOffset ToDateTimeOffset() =>
        DateTimeOffset.UnixEpoch.AddTicks((long)(Value / 100));
}
```

## Core Models

### SpanRecord

The primary data model representing a single span.

```csharp
public sealed record SpanRecord
{
    public required SpanId SpanId { get; init; }
    public required TraceId TraceId { get; init; }
    public SpanId? ParentSpanId { get; init; }
    public required string Name { get; init; }
    public required UnixNano StartTimeUnixNano { get; init; }
    public required UnixNano EndTimeUnixNano { get; init; }
    public required SpanKind Kind { get; init; }
    public required StatusCode StatusCode { get; init; }
    public GenAiSpanData? GenAi { get; init; }
}
```

| Property | Type | Description |
|----------|------|-------------|
| `SpanId` | SpanId | Unique span identifier |
| `TraceId` | TraceId | Trace this span belongs to |
| `ParentSpanId` | SpanId? | Parent span for hierarchy |
| `Name` | string | Operation name |
| `StartTimeUnixNano` | UnixNano | When the span started |
| `EndTimeUnixNano` | UnixNano | When the span ended |
| `Kind` | SpanKind | Type of span (Client, Server, etc.) |
| `StatusCode` | StatusCode | Outcome (Unset, Ok, Error) |
| `GenAi` | GenAiSpanData? | AI-specific attributes if present |

### SessionSummary

Aggregated statistics for a session.

```csharp
public sealed record SessionSummary
{
    public required SessionId SessionId { get; init; }
    public required UnixNano StartTime { get; init; }
    public required UnixNano EndTime { get; init; }
    public required int SpanCount { get; init; }
    public required int ErrorCount { get; init; }
    public int? TotalInputTokens { get; init; }
    public int? TotalOutputTokens { get; init; }
}
```

### TraceNode

Hierarchical representation of a trace for tree visualization.

```csharp
public sealed record TraceNode
{
    public required SpanRecord Span { get; init; }
    public required IReadOnlyList<TraceNode> Children { get; init; }
}
```

## Enumerations

### SpanKind

Indicates the relationship of the span to remote calls.

| Value | Int | Description |
|-------|-----|-------------|
| `Unspecified` | 0 | Default, type not specified |
| `Internal` | 1 | Internal operation |
| `Server` | 2 | Server receiving request |
| `Client` | 3 | Client making request |
| `Producer` | 4 | Message producer |
| `Consumer` | 5 | Message consumer |

### StatusCode

Outcome of the span's operation.

| Value | Int | Description |
|-------|-----|-------------|
| `Unset` | 0 | Status not set |
| `Ok` | 1 | Operation succeeded |
| `Error` | 2 | Operation failed |
